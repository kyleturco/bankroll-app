'use strict';

angular.module('bankRoll').controller('LoginCtrl', function ($rootScope, $scope, $location, API_URL, $http) {
  var vm = this;

  vm.login = function (email, password) {
    var fb = new Firebase(API_URL);

    fb.authWithPassword({
      email: vm.email,
      password: vm.password
    }, function (err, authData) {
      if (err) {
        console.log('Error', err);
      } else {
        $rootScope.auth = authData;
        $location.path('/overview');
        $scope.$apply();
      }
    });
  };

  vm.register = function (email, password) {
    var fb = new Firebase('https://bankroll.firebaseio.com/profiles');

    fb.createUser({
      email: vm.email,
      password: vm.password
    }, function (err, authData) {
      if (err) {
        console.log('Error', err);
      } else {
        vm.login();
        console.log('User created successfully');
        fb.push({ id: authData.uid, income: { total: 0 }, expenses: { total: 0 } });
      }
    });
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hc3NldHMvYXV0aC9sb2dpbi5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUNKLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FFbEIsVUFBVSxDQUFDLFdBQVcsRUFBRSxVQUFVLFVBQVUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDaEYsTUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDOztBQUVkLElBQUUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxLQUFLLEVBQUUsUUFBUSxFQUFFO0FBQ3BDLFFBQUksRUFBRSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUUvQixNQUFFLENBQUMsZ0JBQWdCLENBQUM7QUFDbEIsV0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLO0FBQ2YsY0FBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRO0tBQ3RCLEVBQUUsVUFBVSxHQUFHLEVBQUUsUUFBUSxFQUFFO0FBQzFCLFVBQUksR0FBRyxFQUFFO0FBQ1AsZUFBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUE7T0FDMUIsTUFBTTtBQUNMLGtCQUFVLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQztBQUMzQixpQkFBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM1QixjQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7T0FDakI7S0FDRixDQUFDLENBQUM7R0FDSixDQUFDOztBQUVGLElBQUUsQ0FBQyxRQUFRLEdBQUcsVUFBVSxLQUFLLEVBQUUsUUFBUSxFQUFFO0FBQ3ZDLFFBQUksRUFBRSxHQUFHLElBQUksUUFBUSxDQUFDLDBDQUEwQyxDQUFDLENBQUM7O0FBRWxFLE1BQUUsQ0FBQyxVQUFVLENBQUM7QUFDWixXQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUs7QUFDZixjQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVE7S0FDdEIsRUFBRSxVQUFVLEdBQUcsRUFBRSxRQUFRLEVBQUU7QUFDMUIsVUFBSSxHQUFHLEVBQUU7QUFDUCxlQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQTtPQUMxQixNQUFNO0FBQ0wsVUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ1gsZUFBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ3pDLFVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxFQUFDLENBQUMsQ0FBQztPQUN2RTtLQUNGLENBQUMsQ0FBQTtHQUNILENBQUM7Q0FDSCxDQUFDLENBQUMiLCJmaWxlIjoic3JjL2Fzc2V0cy9hdXRoL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gIC5tb2R1bGUoJ2JhbmtSb2xsJylcblxuICAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCBBUElfVVJMLCAkaHR0cCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShBUElfVVJMKTtcblxuICAgICAgZmIuYXV0aFdpdGhQYXNzd29yZCh7XG4gICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcbiAgICAgICAgcGFzc3dvcmQ6IHZtLnBhc3N3b3JkXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyLCBhdXRoRGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJywgZXJyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRyb290U2NvcGUuYXV0aCA9IGF1dGhEYXRhO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvb3ZlcnZpZXcnKTtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2bS5yZWdpc3RlciA9IGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZSgnaHR0cHM6Ly9iYW5rcm9sbC5maXJlYmFzZWlvLmNvbS9wcm9maWxlcycpO1xuXG4gICAgICBmYi5jcmVhdGVVc2VyKHtcbiAgICAgICAgZW1haWw6IHZtLmVtYWlsLMKgXG4gICAgICAgIHBhc3N3b3JkOiB2bS5wYXNzd29yZFxuICAgICAgfSwgZnVuY3Rpb24gKGVyciwgYXV0aERhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcicsIGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5sb2dpbigpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICBmYi5wdXNoKHtpZDogYXV0aERhdGEudWlkLCBpbmNvbWU6IHt0b3RhbDogMH0sIGV4cGVuc2VzOiB7dG90YWw6IDB9fSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfTtcbiAgfSk7XG5cbiJdfQ==
