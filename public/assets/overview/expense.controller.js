'use strict';

angular.module('bankRoll').controller('FinanceController', function ($scope, expenseFactory, $firebaseObject, API_URL, $rootScope, currentUser) {
  var vm = this;
  var fb = new Firebase(API_URL);
  // var authData = fb.getAuth();

  var profileRef = new Firebase('https://bankroll.firebaseio.com/profiles');
  var currentUserExpense = profileRef.child($rootScope.auth.uid).child('expense');
  $scope.expenseList = $firebaseObject(currentUserExpense);

  // expenseFactory.allExpense(function(expense){
  //   vm.expense = expense;
  // });

  vm.saveExpense = function () {
    var randNum = Math.floor(Math.random() * 1000000000000000);
    var profileRef = new Firebase('https://bankroll.firebaseio.com/profiles/');
    vm.expense.time = Date();
    vm.expense.date = JSON.stringify(vm.expense.date);
    profileRef.child($rootScope.auth.uid + '/expense' + '/expense' + randNum).set(vm.expense, function (err) {
      console.log('done setting expense, err:', err);
      // $scope.incomeList = $firebaseObject(profileRef);
      // value has been set, can redirect the user or what ever
      vm.expense = {};
      $scope.$apply();
    });
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hc3NldHMvb3ZlcnZpZXcvZXhwZW5zZS5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUNKLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FFbEIsVUFBVSxDQUFDLG1CQUFtQixFQUFFLFVBQVUsTUFBTSxFQUFFLGNBQWMsRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUU7QUFDcEgsTUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ2QsTUFBSSxFQUFFLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7OztBQUcvQixNQUFJLFVBQVUsR0FBRyxJQUFJLFFBQVEsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO0FBQzFFLE1BQUksa0JBQWtCLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoRixRQUFNLENBQUMsV0FBVyxHQUFHLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOzs7Ozs7QUFNekQsSUFBRSxDQUFDLFdBQVcsR0FBRyxZQUFZO0FBQzNCLFFBQUksT0FBTyxHQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLGdCQUFnQixDQUFDLEFBQUMsQ0FBQztBQUM3RCxRQUFJLFVBQVUsR0FBRyxJQUFJLFFBQVEsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO0FBQzNFLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDO0FBQ3pCLE1BQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNsRCxjQUFVLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLFVBQVUsR0FBRyxVQUFVLEdBQUksT0FBTyxBQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFTLEdBQUcsRUFBRTtBQUN4RyxhQUFPLENBQUMsR0FBRyxDQUFDLDRCQUE0QixFQUFFLEdBQUcsQ0FBQyxDQUFDOzs7QUFHL0MsUUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7QUFDaEIsWUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ2pCLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDTCxDQUFDLENBQUMiLCJmaWxlIjoic3JjL2Fzc2V0cy9vdmVydmlldy9leHBlbnNlLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gIC5tb2R1bGUoJ2JhbmtSb2xsJylcblxuICAuY29udHJvbGxlcignRmluYW5jZUNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBleHBlbnNlRmFjdG9yeSwgJGZpcmViYXNlT2JqZWN0LCBBUElfVVJMLCAkcm9vdFNjb3BlLCBjdXJyZW50VXNlcikge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdmFyIGZiID0gbmV3IEZpcmViYXNlKEFQSV9VUkwpO1xuICAgIC8vIHZhciBhdXRoRGF0YSA9IGZiLmdldEF1dGgoKTtcblxuICAgIHZhciBwcm9maWxlUmVmID0gbmV3IEZpcmViYXNlKCdodHRwczovL2Jhbmtyb2xsLmZpcmViYXNlaW8uY29tL3Byb2ZpbGVzJyk7XG4gICAgdmFyIGN1cnJlbnRVc2VyRXhwZW5zZSA9IHByb2ZpbGVSZWYuY2hpbGQoJHJvb3RTY29wZS5hdXRoLnVpZCkuY2hpbGQoJ2V4cGVuc2UnKTtcbiAgICAkc2NvcGUuZXhwZW5zZUxpc3QgPSAkZmlyZWJhc2VPYmplY3QoY3VycmVudFVzZXJFeHBlbnNlKTtcblxuICAgIC8vIGV4cGVuc2VGYWN0b3J5LmFsbEV4cGVuc2UoZnVuY3Rpb24oZXhwZW5zZSl7XG4gICAgLy8gICB2bS5leHBlbnNlID0gZXhwZW5zZTtcbiAgICAvLyB9KTtcblxuICAgIHZtLnNhdmVFeHBlbnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJhbmROdW0gPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDAwMDAwMDAwMCkpO1xuICAgICAgdmFyIHByb2ZpbGVSZWYgPSBuZXcgRmlyZWJhc2UoJ2h0dHBzOi8vYmFua3JvbGwuZmlyZWJhc2Vpby5jb20vcHJvZmlsZXMvJyk7XG4gICAgICB2bS5leHBlbnNlLnRpbWUgPSBEYXRlKCk7XG4gICAgICB2bS5leHBlbnNlLmRhdGUgPSBKU09OLnN0cmluZ2lmeSh2bS5leHBlbnNlLmRhdGUpO1xuICAgICAgcHJvZmlsZVJlZi5jaGlsZCgkcm9vdFNjb3BlLmF1dGgudWlkICsgJy9leHBlbnNlJyArICcvZXhwZW5zZScgKyAocmFuZE51bSkpLnNldCh2bS5leHBlbnNlLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2RvbmUgc2V0dGluZyBleHBlbnNlLCBlcnI6JywgZXJyKTtcbiAgICAgIC8vICRzY29wZS5pbmNvbWVMaXN0ID0gJGZpcmViYXNlT2JqZWN0KHByb2ZpbGVSZWYpO1xuICAgICAgICAvLyB2YWx1ZSBoYXMgYmVlbiBzZXQsIGNhbiByZWRpcmVjdCB0aGUgdXNlciBvciB3aGF0IGV2ZXJcbiAgICAgICAgdm0uZXhwZW5zZSA9IHt9O1xuICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KTtcbiAgICB9O1xufSk7XG4iXX0=
